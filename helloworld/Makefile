_ := $(shell mkdir -p out)

.PHONY: all
all: out/helloworld out/helloworld.static out/helloworld.packed

out/helloworld: main.c
	gcc $< -o $@ 

out/helloworld.static: main.c
	gcc -static $< -o $@ 

# UPX: https://github.com/upx/upx
# upx won't pack small files so we statically compile to produce bigger binary
out/helloworld.packed: out/helloworld.static
	upx $< -o $@ -f
